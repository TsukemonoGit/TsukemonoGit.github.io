<script lang="ts">
	import type { Work } from '$lib/data/state';
	import { t } from '@konemono/svelte5-i18n';

	type Props = Work & { category: string };
	let { category, id, url, image, tags = [], date }: Props = $props(); // ← dateを追加

	const titleKey = `${category}.${id}.title`;
	const descriptionKey = `${category}.${id}.description`;
</script>

<div class="bg-base-100 border-surface-200 block overflow-hidden rounded-xl border p-0 shadow-md">
	<!-- Header -->
	<header
		class="bg-surface-100-900 flex aspect-[21/9] w-full items-center justify-center overflow-hidden"
	>
		{#if image}
			<img src={image} class="h-full w-full object-cover" alt="banner" />
		{:else}
			<!-- 画像がない場合のプレースホルダー -->
			<span class="text-sm text-slate-400">No image available</span>
		{/if}
	</header>

	<!-- Article -->
	<article class="min-h-[180px] space-y-4 p-6">
		<div>
			<h3 class="mb-2 text-xl font-bold text-slate-800 dark:text-slate-100">{$t(titleKey)}</h3>
		</div>

		<p class="text-sm leading-relaxed text-slate-600 dark:text-slate-300">
			{$t(descriptionKey)}
		</p>

		{#if tags.length > 0}
			<div class="mt-3 flex flex-wrap gap-2">
				{#each tags as tag}
					<span class="badge preset-outlined-secondary-500 rounded-md">{$t(tag)}</span>
				{/each}
			</div>
		{/if}
	</article>

	<!-- Footer -->

	<footer class="flex min-h-[48px] items-center justify-between gap-4 px-6 py-4">
		<small class="opacity-60">{date}</small>
		<a
			href={url}
			class="btn preset-filled-primary-500 text-primary text-sm font-medium transition-shadow duration-100 hover:shadow-lg"
		>
			{$t(`${category}.${id}.link_text`, 'common.view')}
		</a>
	</footer>
</div>
